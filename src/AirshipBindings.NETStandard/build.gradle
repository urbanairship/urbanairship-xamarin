task clean(type: Delete) {
    doLast() {
        def dirs = [
            "AirshipBindings.NETStandard",
            "AirshipBindings.NETStandard.Abstractions",
            "AirshipBindings.NETStandard.iOS",
            "AirshipBindings.NETStandard.Android"
        ]
        for (String path : dirs) {
            project.delete "${path}/bin"
            project.delete "${path}/obj"
        }
    }
}

task build {
    mustRunAfter(':binderator:build', ':src:AirshipBindings.iOS.common:build')

    def BuildConfiguration=project.properties['build_configuration'] ?: "Release"
    doLast() {
        exec {
            commandLine "dotnet", "build", "--configuration=${BuildConfiguration}", "AirshipBindings.NETStandard.sln"
        }
    }
}

task pack {
    dependsOn(build)
    mustRunAfter(':binderator:pack', ':src:AirshipBindings.iOS.common:pack')
    
    doLast {
        exec {
            commandLine "nuget", "pack", "../../Airship.NETStandard.nuspec", "-OutputDirectory", rootProject.buildDir
        }
    }
}