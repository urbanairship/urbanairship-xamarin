task clean(type: Delete) {
    doLast() {
        def dirs = [
            "AirshipBindings.Portable",
            "AirshipBindings.Portable.Abstractions",
            "AirshipBindings.Portable.iOS",
            "AirshipBindings.Portable.Android"
        ]

        for (String path : dirs) {
            project.delete "${path}/bin"
            project.delete "${path}/obj"
        }
    }
}

task build {
    def BuildConfiguration=project.properties['build_configuration'] ?: "Release"
    doLast() {
        exec {
            commandLine "mono", "$nugetExe", "restore", "AirshipBindings.Portable.sln"
        }

        exec {
            commandLine "${msbuild}", "/t:build", "/p:Configuration=${BuildConfiguration}", "AirshipBindings.Portable.sln"
        }
    }
}

build.dependsOn(':src:AirshipBindings.Android.Core:build')